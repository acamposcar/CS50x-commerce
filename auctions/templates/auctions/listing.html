{% extends "auctions/layout.html" %}

{% block body %}

    
        <div class="d-flex justify-content-center">
            <img src="{{listing.image_url}}" class="img-fluid " alt="">
        </div>
        <div>
            <h2>{{ listing.title }}</h2>
          <p>{{ listing.description|linebreaks }}</p>
          <h3><span class="badge badge-warning">Price: ${{ listing.starting_bid }}</span></h3>
          <p class="small">Created by {{ listing.user }} on {{ listing.date }}</p>
        </div>

        <hr>
        <h3>Comments</h3>
        {% if user.is_authenticated %}
        <form action="{% url 'listing_view' listing.id %}" method="post">
            {% csrf_token %}
            <div class="form-group">
                {{ comment_form }}
            </div>
            <div class="form-group">
                <input class="btn btn-primary" type="submit" value="Save comment">
            </div>
        </form>
        {% else %}
            <div class="alert alert -warning">
             Log in to write a comment
            </div>
        {% endif %}
    {% for comment in comments %}
    <div class="card">
        <dl class="row card-body">
            <dt class="col-sm-2"><div>{{comment.user}}</div><small>{{comment.date}}</small></dt>
            <dd class="col-sm-10">{{comment.content|linebreaks}}</dd>
          </dl>
    </div>
        <!-- <p class="small">Created by {{ comment.user }} on {{ comment.date }}</p> -->
    {% endfor %}

</div>

    </ul>
    
{% endblock %}